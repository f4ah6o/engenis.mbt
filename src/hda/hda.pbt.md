<!-- aletheia:begin -->
# Property-Based Test Targets for hda

> Auto-generated by Aletheia - MoonBit PBT Tool

## Overview

- **Source**: `/Users/fu2hito/src/moonbit/engenis.mbt-pbt/src/hda`
- **Generated**: 2026-01-16
- **Patterns Detected**: 4

## Invariant Targets

- `LinkRel::swap` (LengthPreserving)
- `HdaAttrs::swap` (LengthPreserving)
- `HdaAttrs::delete` (LengthDecreasing)
- `HdaAttrs::push_url` (LengthIncreasing)

<!-- aletheia:end -->

---

# Property-Based Tests

## Package: hda

### prop_rel_to_string_roundtrip

Property: Rel::to_string produces valid HTML rel values

```mbt check
///|
test "prop_rel_to_string_roundtrip" {
  let styles = Rel::custom("stylesheet")
  let str = styles.to_string()
  assert_eq(str, "stylesheet")

  let preload = Rel::namespaced("preload", "as")
  let str2 = preload.to_string()
  assert_true(str2.contains("preload"), msg="should contain preload")
  assert_true(str2.contains("as"), msg="should contain namespace")
}
```

### prop_linkrel_swap_preserves_length

Property: LinkRel::swap replaces existing swap value (length-preserving)

```mbt check
///|
test "prop_linkrel_swap_preserves_length" {
  let rel1 = LinkRel::new(Rel::custom("stylesheet"))
  assert_eq(rel1.to_link_attrs().attrs.length(), 1)

  let rel2 = rel1.swap(Rel::custom("alternate"))
  assert_eq(rel2.to_link_attrs().attrs.length(), 1)
}
```

### prop_linkrel_target_increases_length

Property: LinkRel::target adds a target attribute

```mbt check
///|
test "prop_linkrel_target_increases_length" {
  let rel1 = LinkRel::new(Rel::custom("stylesheet"))
  assert_eq(rel1.to_link_attrs().attrs.length(), 1)

  let rel2 = rel1.target("#frame")
  assert_eq(rel2.to_link_attrs().attrs.length(), 2)
}
```

### prop_hdaattrs_swap_preserves_length

Property: HdaAttrs::swap replaces existing swap value (length-preserving)

```mbt check
///|
test "prop_hdaattrs_swap_preserves_length" {
  let attrs1 = HdaAttrs::new()
  assert_eq(attrs1.to_html_attrs().attrs.length(), 0)

  let attrs2 = attrs1.swap(InnerHTML)
  assert_eq(attrs2.to_html_attrs().attrs.length(), 1)

  let attrs3 = attrs2.swap(OuterHTML)
  assert_eq(attrs3.to_html_attrs().attrs.length(), 1)
}
```

### prop_hdaattrs_delete_increases_length

Property: HdaAttrs::delete adds a delete attribute

```mbt check
///|
test "prop_hdaattrs_delete_increases_length" {
  let attrs1 = HdaAttrs::new()
  assert_eq(attrs1.to_html_attrs().attrs.length(), 0)

  let attrs2 = attrs1.delete("/item")
  assert_eq(attrs2.to_html_attrs().attrs.length(), 1)
}
```

### prop_hdaattrs_push_url_increases_length

Property: HdaAttrs::push_url adds a push-url attribute

```mbt check
///|
test "prop_hdaattrs_push_url_increases_length" {
  let attrs1 = HdaAttrs::new()
  assert_eq(attrs1.to_html_attrs().attrs.length(), 0)

  let attrs2 = attrs1.push_url("/new")
  assert_eq(attrs2.to_html_attrs().attrs.length(), 1)
}
```

### prop_hdaattrs_http_methods_add_attrs

Property: HDA HTTP method attributes increase length

```mbt check
///|
test "prop_hdaattrs_http_methods_add_attrs" {
  let attrs1 = HdaAttrs::new()

  let attrs2 = attrs1.get("/data")
  assert_eq(attrs2.to_html_attrs().attrs.length(), 1)

  let attrs3 = attrs2.post("/submit")
  assert_eq(attrs3.to_html_attrs().attrs.length(), 2)

  let attrs4 = attrs3.put("/update")
  assert_eq(attrs4.to_html_attrs().attrs.length(), 3)

  let attrs5 = attrs4.patch("/modify")
  assert_eq(attrs5.to_html_attrs().attrs.length(), 4)
}
```

### prop_hdaattrs_trigger_increases_length

Property: HdaAttrs::trigger adds a trigger attribute

```mbt check
///|
test "prop_hdaattrs_trigger_increases_length" {
  let attrs1 = HdaAttrs::new()
  assert_eq(attrs1.to_html_attrs().attrs.length(), 0)

  let attrs2 = attrs1.trigger("click")
  assert_eq(attrs2.to_html_attrs().attrs.length(), 1)
}
```

### prop_hdaattrs_on_increases_length

Property: HdaAttrs::on adds an on attribute

```mbt check
///|
test "prop_hdaattrs_on_increases_length" {
  let attrs1 = HdaAttrs::new()
  assert_eq(attrs1.to_html_attrs().attrs.length(), 0)

  let attrs2 = attrs1.on("event")
  assert_eq(attrs2.to_html_attrs().attrs.length(), 1)
}
```

### prop_hdaattrs_to_html_attrs_converts

Property: HdaAttrs::to_html_attrs produces valid HTML attributes

```mbt check
///|
test "prop_hdaattrs_to_html_attrs_converts" {
  let hda_attrs = HdaAttrs::new()
    .get("/data")
    .trigger("click")
    .target("#result")

  let html_attrs = hda_attrs.to_html_attrs()

  // Should have 3 attributes
  assert_eq(html_attrs.attrs.length(), 3)

  // Check attribute names
  let mut found_get = false
  let mut found_trigger = false
  let mut found_target = false

  for i = 0; i < html_attrs.attrs.length(); i = i + 1 {
    match html_attrs.attrs[i].0 {
      "hx-get" => found_get = true
      "hx-trigger" => found_trigger = true
      "hx-target" => found_target = true
      _ => ()
    }
  }

  assert_true(found_get, msg="should have hx-get")
  assert_true(found_trigger, msg="should have hx-trigger")
  assert_true(found_target, msg="should have hx-target")
}
```
