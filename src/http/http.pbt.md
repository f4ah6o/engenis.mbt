<!-- aletheia:begin -->
# Property-Based Test Targets for http

> Auto-generated by Aletheia - MoonBit PBT Tool

## Overview

- **Source**: `/Users/fu2hito/src/moonbit/engenis.mbt-pbt/src/http`
- **Generated**: 2026-01-16
- **Patterns Detected**: 4

## Invariant Targets

- `HttpResponse::swap` (LengthPreserving)
- `HttpResponse::reswap` (LengthPreserving)
- `HttpResponse::push_url` (LengthIncreasing)
- `HttpResponse::trigger_after_swap` (LengthPreserving)

<!-- aletheia:end -->

---

# Property-Based Tests

## Package: http

### prop_httpmethod_to_string_valid

Property: HttpMethod::to_string produces valid HTTP method strings

```mbt check
///|
test "prop_httpmethod_to_string_valid" {
  assert_eq(GET.to_string(), "GET")
  assert_eq(POST.to_string(), "POST")
  assert_eq(PUT.to_string(), "PUT")
  assert_eq(DELETE.to_string(), "DELETE")
  assert_eq(PATCH.to_string(), "PATCH")
}
```

### prop_httpresponse_swap_preserves_length

Property: HttpResponse::swap replaces existing swap value (length-preserving)

```mbt check
///|
test "prop_httpresponse_swap_preserves_length" {
  let resp1 = HttpResponse::new("<div>content</div>")

  let resp2 = resp1.swap(InnerHTML)
  assert_eq(resp2.to_hda_attrs().to_html_attrs().attrs.length(), 1)

  let resp3 = resp2.swap(OuterHTML)
  assert_eq(resp3.to_hda_attrs().to_html_attrs().attrs.length(), 1)
}
```

### prop_httpresponse_reswap_preserves_length

Property: HttpResponse::reswap replaces existing swap value (length-preserving)

```mbt check
///|
test "prop_httpresponse_reswap_preserves_length" {
  let resp1 = HttpResponse::new("<div>content</div>")

  let resp2 = resp1.reswap(InnerHTML)
  assert_eq(resp2.to_hda_attrs().to_html_attrs().attrs.length(), 1)

  let resp3 = resp2.reswap(OuterHTML)
  assert_eq(resp3.to_hda_attrs().to_html_attrs().attrs.length(), 1)
}
```

### prop_httpresponse_push_url_increases_length

Property: HttpResponse::push_url adds a push-url attribute

```mbt check
///|
test "prop_httpresponse_push_url_increases_length" {
  let resp1 = HttpResponse::new("<div>content</div>")
  assert_eq(resp1.to_hda_attrs().to_html_attrs().attrs.length(), 0)

  let resp2 = resp1.push_url("/new")
  assert_eq(resp2.to_hda_attrs().to_html_attrs().attrs.length(), 1)
}
```

### prop_httpresponse_trigger_after_swap_preserves_length

Property: HttpResponse::trigger_after_swap adds/updates trigger (length-preserving when updating)

```mbt check
///|
test "prop_httpresponse_trigger_after_swap_preserves_length" {
  let resp1 = HttpResponse::new("<div>content</div>")

  let resp2 = resp1.trigger_after_swap("click")
  assert_eq(resp2.to_hda_attrs().to_html_attrs().attrs.length(), 1)

  let resp3 = resp2.trigger_after_swap("load")
  assert_eq(resp3.to_hda_attrs().to_html_attrs().attrs.length(), 1)
}
```

### prop_httpresponse_to_hda_attrs_converts

Property: HttpResponse::to_hda_attrs produces valid HDA attributes

```mbt check
///|
test "prop_httpresponse_to_hda_attrs_converts" {
  let resp = HttpResponse::new("<div>content</div>")
    .swap(InnerHTML)
    .trigger("click")
    .target("#result")

  let hda_attrs = resp.to_hda_attrs()
  let html_attrs = hda_attrs.to_html_attrs()

  // Should have 3 attributes
  assert_eq(html_attrs.attrs.length(), 3)
}
```

### prop_httpresponse_content_preserved

Property: HttpResponse preserves the content HTML

```mbt check
///|
test "prop_httpresponse_content_preserved" {
  let content = "<div>test</div>"
  let resp = HttpResponse::new(content)

  assert_eq(resp.content, content)
}
```
